안녕하십니까 9축 센서를 주제로 발표를 하게된 AA22 박상현 AA23 입니다

시작하기 앞서, 9축 센서란
가속도 센서 3축, 자이로 센서 3축, 지자기 센서 3축으로 총 9축의 값을 측정하는 센서로, 
관성 관측 장치라고도 부릅니다.
저희는 이번 프로젝트에서, 아두이노 Nano 33 BLE보드를 이용하여 9축 데이터를 측정하고, 
NodeJs서버를 이용하여 홈페이지와 Collab에서 Data 분석을 진행할겁니다.

목차입니다.
Arduino NodeJs, HTML Collab 활용 순으로 진행하겠습니다.


먼저 아두이노 입니다.
센서를 활용하기 위한 헤더파일을 정의하였고
setup에서 NodeJs와의 통신을 위한 Serial과 센서 값을 읽기 위한 IMU를 초기화 하였습니다.
그다음 9개의 센서값을 기록하기 위한 각각의 변수를 정의하였고, 보드로 부터 값을 받아들여
NodeJs와의 통신을 위해 Comma로 구분해 Serial에 출력하였습니다.
실행 결과입니다.


그다음 NodeJs입니다.
MongoDB에 저장하기 위한 Schema를 설정하고, Console에 보이기 위한 info 함수를 정의합니다.
아두이노 보드에서 data가 들어올때마다 ,를 기준으로 데이터를 받아들입니다.
그 다음 HTML에 출력을 하기 위한 mdata 배열과, MongoDB에 저장하기 위한 Sensor형 변수에
각각 의 포멧에 맞게 저장합니다.

실행 결과입니다.
Console Log를 통해
현재 날짜와 9개 축 Data가 정상적으로 출력되는것을 볼 수 있고,
MongoDB에도 값이 정상적으로 기록되는것을 볼 수 있습니다.


Express서버입니다.
먼저 MongoDB에서 값을 읽어오기 위한 Schema설정하고, 
MongoDB에서 값을 읽어와 Express서버의 iot 경로로 전송을 합니다.

실행 화면입니다.
Express 포트인 3030번에 연결이 되었고, MongoDB와도 정상적으로 연결이 된 모습을 볼 수 있습니다.


HTML입니다.
Node Server를 통해 Data가 들어올 때 마다, 값을 실수로 변화하여 저장하고,
처음 한번, 총 50개의 Data가 그려지도록 그래프를 설정합니다.
그 다음 벡터의 크기를 구하기 위해 각 성분의 제곱의 합의 제곱근을 구해 배열에 저장합니다.
그다음 센서의 값중 하나라도 값이 변하면, gauge와 그래프에 값을 넣어 그립니다.

실행 화면입니다.
3개의 gauge와 3개의 성분이 그려지는 3개의 그래프가 정상적으로 출력되는것을 볼 수 있습니다.


Collab입니다.
먼저 Express 서버에서 json형식으로 Data를 읽어와 DataFrame으로 만들었습니다.
_id와 같은 필요 없는 Column과 벡터의 크기 같은 필요한 Column이 있어서
필요한 Column을 추가하고, Column을 원하는 형태에 맞게 지정해 줍니다.

info()입니다.
각 Column들의 Null값의 존재 여부와, Dtype이 날자형과 실수형으로 이루어짐을 볼 수 있습니다.

describe()입니다.
각각의 성분들의 평균, 표준편차와 최소 최대를 포함한 사분위수를 볼 수 있습니다.

가속도계 plot입니다.
가속도계의 x, y, z성분과 크기를 시간의 경과에 따라 그래프로 나타낸 것입니다.

Gyro 센서 plot입니다.
가속도계와 같이 시간에 따라 그래프로 나타내 보았습니다.

지자기 센서 입니다.
마찬가지로 시간의 따라 그래프로 그려보았습니다.

분포도입니다.
가속도, Gyro, 지자기의 분포를 보기위해 violinplot으로 그려보았습니다.
각 y축은 Data의 크기, x축은 분포를 의미합니다.
데이터 수집한 특성상, 정지해 있는 경우가 많았으므로, 각각 정지상태에서의 Data가 압도적으로 많은것을 볼 수 있습니다.

평균입니다.
각각 값의 범위는 상당히 넓지만 수치가 낮은 정지상태의 값이 많아 평균은 높지 않음을 볼 수 있습니다.

그 다음 시간을 1초, 1분, 10분 단위로 resampling하여 그래프로 그려보았습니다.

지금은 특별한 목적을 가지고 Data를 수집하는 것이 아니라, EDA를 진행해도 별다른 의미를 찾지 못하지만.
실제 목적을 가지고 Data를 수집할 경우 이러한 EDA를 통해 그 Data를 분석 할 수 있을것 같습니다.

마지막으로 센서의 활용입니다.
9축 센서는 일상 생활속, 전문 분야속등 많은 분야에서 사용하고 있는데

일상속에서 카메라의 손떨림 보정기능이나, 에어백 작동을 위한 충돌센서의 보조, 
기울기등을 이용한 게임이나, 비행기 드론과 같은 비행체의 자세제어등에 사용되고 있습니다. 

또한 전문분야를 보면 최근 아이폰에서도 제공하는 9축 센서와 라이더 센서를 이용한 3D 스캐너나,
GPS등과 같은 위치 결정 시스템을 사용할 수 없는 우주선,
가상의 세계인 VR에서 동작을 결정할 컨트롤러에도 쓰이고
파킨슨 환자와 같이 팔과 다리의 떨림 때문에 일상 생활에 많은 어려움을 겪는 사람들을 위한 자이로 글로브와 같은 장비도 나오고 있습니다.

마지막으로 활용 아이디어입니다.
최근 배달 음식의 수요가 증가하고, Amazon과 같은 전자상 거래의 수요가 증가하면서 다양한 곳에서 무인 배달 로봇을 도입하고 있습니다.
하지만, 무인으로 움직이는 만큼 다양한 문제가 있는데, 그중 하나가 배달 로봇이 움직임에 따라 내용물이 흔들려 파손되는 것이었습니다.,
그래서 9축 센서를 활용하여 무인 배달 로봇의 내부를 짐벌과 같이 구성하여, 로봇이 흔들려도 내용물은 흔들림을 최소화 한다면,
이와 같은 문제는 해결할 수 있을 것 같습니다.

이상으로 발표를 마칩니다. 감사합니다.